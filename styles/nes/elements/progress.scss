@use '../../variables' as variables;
@use '../base/variables' as nesVariables;
@use '../../mixins' as mixins;

.nes-progress {
  @include mixins.compact-rounded-corners();

  width: 100%;
  height: 48px;
  margin: 4px;
  color: variables.$base-color;
  background-color: variables.$background-color;
  -webkit-appearance: none;
  appearance: none;

  @mixin progress-style($color) {
    &::-webkit-progress-bar {
      background-color: variables.$background-color;
    }
    &::-webkit-progress-value {
      background-color: $color;
    }
    &::-moz-progress-bar {
      background-color: $color;
    }
    &::-ms-fill {
      background-color: $color;
      border: none;
    }
  }

  @include progress-style(variables.$base-color);

  &.is-rounded {
    @include mixins.rounded-corners();
  }
  &.is-primary {
    @include progress-style(map-get(nesVariables.$primary-colors, "normal"));
  }

  &.is-success {
    @include progress-style(map-get(nesVariables.$success-colors, "normal"));
  }

  &.is-warning {
    @include progress-style(map-get(nesVariables.$warning-colors, "normal"));
  }

  &.is-error {
    @include progress-style(map-get(nesVariables.$error-colors, "normal"));
  }

  &.is-pattern {
    &::-webkit-progress-value {
      background-color: variables.$base-color;
      background-image: linear-gradient(
          45deg,
          variables.$background-color 25%,
          transparent 25%,
          transparent 75%,
          variables.$background-color 75%,
          variables.$background-color
        ),
        linear-gradient(
          45deg,
          variables.$background-color 25%,
          transparent 25%,
          transparent 75%,
          variables.$background-color 75%,
          variables.$background-color
        );
      background-position: 0 0, 10px 10px;
      background-size: 20px 20px;
    }

    &::-moz-progress-bar {
      background-color: variables.$base-color;
      background-image: -moz-linear-gradient(
          45deg,
          variables.$background-color 25%,
          transparent 25%,
          transparent 75%,
          variables.$background-color 75%,
          variables.$background-color
        ),
        -moz-linear-gradient(45deg, variables.$background-color 25%, transparent 25%, transparent 75%, variables.$background-color
              75%, variables.$background-color);
      background-position: 0 0, 10px 10px;
      background-size: 20px 20px;
    }

    &::-ms-fill {
      background-color: variables.$base-color;
      background-image: linear-gradient(
          45deg,
          variables.$background-color 25%,
          transparent 25%,
          transparent 75%,
          variables.$background-color 75%,
          variables.$background-color
        ),
        linear-gradient(
          45deg,
          variables.$background-color 25%,
          transparent 25%,
          transparent 75%,
          variables.$background-color 75%,
          variables.$background-color
        );
      background-position: 0 0, 10px 10px;
      background-size: 20px 20px;
      border: none;
    }
  }
}
